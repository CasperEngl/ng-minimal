<div class="container my-5">
  <article *ngIf="product$ as product">
    <header class="mb-3 d-flex flex-column align-items-center">
      <h1>{{ product.name }}</h1>
      <p class="h4 text-muted">{{ product.date_created | date }}</p>
    </header>
    <section class="row">
      <div class="col-sm-6">
        <figure class="product__image">
          <img [src]="product.images[0].shop_single" [alt]="product.images[0].alt" />
        </figure>
      </div>
      <div class="col-sm-6">
        <h4 [innerHTML]="product.price_html"></h4>
        <div [innerHTML]="product.description"></div>
        <div class="form-group row">
          <label for="quantity" class="col-auto col-form-label">Quantity</label>
          <div class="col">
            <input class="form-control" type="number" value="1" id="quantity" (keyup)="changeQuantity($event)">
          </div>
        </div>
        <div class="btn-group">
          <button class="btn btn-primary" (click)="addToCart({ product_id: product.id, quantity: 1 })">Add to cart</button>
          <button class="btn btn-warning" (click)="getCart()">Get Cart</button>
          <button class="btn btn-danger" (click)="clearCart()">Clear Cart</button>
        </div>
      </div>
      <div class="col-12 my-5">
        <ngb-carousel *ngIf="product.images[1]">
          <ng-template ngbSlide *ngFor="let image of product.images | slice:1">
            <img [src]="image.shop_single" alt="image.alt">
          </ng-template>
        </ngb-carousel>
      </div>
    </section>
    <footer class="my-5">
      <h2>Related Products</h2>
      <div class="row">
        <div class="col-4" *ngFor="let id of product.related_ids">
          <app-product-relation [id]="id"></app-product-relation>
        </div>
      </div>
    </footer>
  </article>
</div>
